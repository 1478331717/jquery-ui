<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Grid: Sorting, Paging, Filtering</title>
	<link rel="stylesheet" href="../themes/base/jquery.ui.all.css">
	<link rel="stylesheet" href="grid.css">
	<script src="../jquery-1.6.2.js"></script>
	<script src="../external/jquery.tmpl.js"></script>
	<script src="../ui/jquery.ui.core.js"></script>
	<script src="../ui/jquery.ui.widget.js"></script>
	<script src="../ui/jquery.ui.button.js"></script>
	<script src="../ui/jquery.ui.menu.js"></script>
	<script src="../ui/jquery.ui.position.js"></script>
	<script src="../ui/jquery.ui.popup.js"></script>
	<script src="datasource.js"></script>
	<script src="datasource-odata.js"></script>
	<script src="grid.js"></script>
	<script src="pager.js"></script>
	<script src="menugrid.js"></script>
	<script>
	$(function() {
		var movies = $.ui.odataDatasource({
			resource: "http://odata.netflix.com/Catalog/Titles"
		});
		var grid = $( "#movies" ).grid({
			source: movies,
			refresh: function() {
				var paging = movies.options.paging,
					total = movies.totalCount;
				$(".paging-from").text( paging.offset + 1 );
				var to = paging.offset + paging.limit + 1;
				if (to > total) {
					to = total;
				}
				$(".paging-to").text( to );
				$(".paging-total").text( total );
			}
		}).menugrid();

		$("#pagesize").change(function() {
			movies.option("paging.limit", +$(this).val()).refresh();
		});

		$( "#pager" ).pager({
			source: movies
		});

		movies.refresh();
	});
	</script>
	<style>
	.ui-menu {
		position: absolute;
	}
	tfoot td {
		text-align: center;
	}
	#movies {
		width: 800px;
	}
	</style>
</head>
<body>

<script type="text/x-jquery-tmpl" id="menu-tmpl">
	<ul>
		<li>
			<a href="#" data-sort="asc">Sort Ascending</a>
		</li>
		<li>
			<a href="#" data-sort="desc">Sort Descending</a>
		</li>
	</ul>
</script>

<h2>Movies! Click header for sort menu, use inputs for filtering, pager for paging</h2>
<table id="movies">
	<thead>
		<tr>
			<th width="600" data-property="Name" data-type="string">Name</th>
			<th width="100" data-property="ReleaseYear" data-type="number">Release Year</th>
			<th width="100" data-property="AverageRating" data-type="number">Average Rating</th>
		</tr>
	</thead>
	<tbody>
	</tbody>
	<tfoot>
		<tr>
			<td id="pager" class="ui-state-default">
				<button data-page="first">First</button>
				<button data-page="prev">Prev</button>
				<span>
					Page <input class="current" size="4"/> of <span class="total">0</span>
				</span>
				<button data-page="next">Next</button>
				<button data-page="last">Last</button>
			</td>
			<td class="ui-state-default">
				<label for="pagesize">Pagesize</label>
				<select id="pagesize">
					<option>10</option>
					<option>20</option>
					<option>30</option>
				</select>
			</td>
			<td class="ui-state-default">
				Viewing rows <span class="paging-from">0</span> to <span class="paging-to">0</span> of <span class="paging-total">0</span>
			</td>
		</tr>
	</tfoot>
</table>

</body>
</html>
