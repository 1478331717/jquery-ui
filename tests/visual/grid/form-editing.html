<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Grid: Editing</title>
	<link rel="stylesheet" href="../visual.css">
	<link rel="stylesheet" href="../../../themes/base/jquery.ui.all.css">
	<link rel="stylesheet" href="grid.css">
	<script src="../../../jquery-1.4.4.js"></script>
	<script src="../../../external/jquery.tmpl.js"></script>
	<script src="../../../ui/jquery.ui.core.js"></script>
	<script src="../../../ui/jquery.ui.widget.js"></script>
	<script src="../../../ui/jquery.ui.button.js"></script>
	<script src="dataitem.js"></script>
	<script src="datasource.js"></script>
	<script src="datastore.js"></script>
	<script src="grid.js"></script>
	<script>
	$.ui.dataitem.extend( "developer", {});
	$.ui.datasource({
		type: "developer",
		source: "fixture.json"
	});

	$(function() {
		$( "#developers" ).grid({
			type: "developer",
			select: showDetails,
			columns: [ "firstName", "lastName", "country" ]
		});

		var formItem;
		var form = $( "#developer" ).submit(function( event ) {
			event.preventDefault();
			var serialized = $( this ).children( "form" ).serializeArray();
			var item = formItem.options.data;
			$.each( serialized, function( i, field ) {
				item[ field.name ] = field.value;
			});
			$( "table" ).grid( "refresh" );
			form.empty();
		});
		function showDetails( event, ui ) {
			formItem = ui.item;
			$( "#developer-tmpl" )
				.tmpl( ui.item.options.data )
				.appendTo( form.empty() );
		}
	});
	</script>
</head>
<body>

<h2>remote data source, editing</h2>
<table id="developers">
	<thead>
		<tr>
			<th data-field="firstName">First Name</th>
			<th data-field="lastName">Last Name</th>
			<th data-field="country">Country</th>
		</tr>
	</thead>
	<tbody>
	</tbody>
</table>

<div id="developer"></div>

<script type="text/x-jquery-tmpl" id="developer-tmpl">
<form>
	<legend>Edit</legend>
	<div>
		<label>Firstname: </label>
		<input name="firstName" value="${firstName}">
	</div>
	<div>
		<label>Lastname: </label>
		<input name="lastName" value="${lastName}">
	</div>
	<div>
		<label>GitHub username: </label>
		<input name="github" value="${github}">
	</div>
	<div>
		<label>Twitter username: </label>
		<input name="twitter" value="${twitter}">
	</div>
	<div>
		<label>Country: </label>
		<input name="country" value="${country}">
	</div>
	<input type="submit">
</form>
</script>

</body>
</html>
